#!/usr/bin/python

import autopath
import path
from pypy.tool.build import config

if __name__ == '__main__':
    from py.execnet import SshGateway, PopenGateway
    from pypy.tool.build.metaserver import init

    if config.server in ['localhost', '127.0.0.1']:
        gw = PopenGateway()
    else:
        gw = SshGateway(config.server)
    channel = init(gw, config)

    try:
        while 1:
            data = channel.receive()
            print data
    finally:
        channel.close()
        gw.exit()

